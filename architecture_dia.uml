@startuml

!theme mars

title Diagram

cloud "AWS Cloud" as aws {

    rectangle "Route 53" as route53 {
        component "Hosted Zone\n(yourdomain.dev)" as hostedZone
    }

    rectangle "EC2" as ec2 {
        component "Launch Template" as launchTemplate {
            note right: Amazon Linux 2\nhttpd + stress preinstalled\nindex.html shows hostname & ID
        }

        database "EC2 Instances" as instances {
            collections "Instance 1" as instance1
            collections "Instance 2" as instance2
            collections "..." as instanceN
        }

        rectangle "Target Group" as targetGroup {
            note right: HTTP Health Checks on "/"
        }
    }
}

route53 --> hostedZone

launchTemplate --> instances : Launches

targetGroup --> instance1 : Registers
targetGroup --> instance2 : Registers
targetGroup --> instanceN : Registers

targetGroup ..> instance1 : HTTP Health Check (GET /)
targetGroup ..> instance2 : HTTP Health Check (GET /)
targetGroup ..> instanceN : HTTP Health Check (GET /)


@enduml
